# PocketFlow的优缺点

## PocketFlow的一个基本情况

环境：

1. tensorflow 1.10-1.12 （只支持 tensorflow）
2. horovod （基于all-reduce的分布式框架）

## 优点

1. 支持autoML，很多超参数是可以自动调整。
2. 支持剪枝、量化、蒸馏等多种压缩算法。
3. 默认支持多卡，基于horovod的分布式训练环境。
4. **可以将蒸馏融入到其他压缩算法中。**
5. 提供移动端模型的转换和移动端部署，基于（tfLite）。

## 缺点

1. **只支持tensorflow，而且版本要求的比较苛刻（tf1.10之后API变动很快）。**
2. GPU使用效率不高（我在使用中发现的，可能是个人代码或者平台的原因，但知乎上发现也有一些人有这个问题）。
3. **实现的算法并不多。**
4. 文档不全，很多框架的使用（尤其是一些参数的意义）文档中没有。
5. 虽然支持autoML，但是强化学习调参时相对费时间和资源。
6. 数据输入的`Pipeline`不通用，除了经典的`ImageNet`、`Cifar10`、`pascalvoc`的数据集，其他的输入都需要自己实现，没有一个通用的input接口。
7. **Github上issues不回，反映的一些bug也没修复，官方群也没人答疑。（疑似放弃维护）**

## 针对模型的转换的一些问题

1. 模型转换本身很麻烦，我尝试过`MMDnn`工具，应该属于微软`OpenPAI`工具集合中的一部分，也通过`onnx`媒介从`Pytorch`保存模型的格式转换为`TensorFlow`的模型。由于各公司都在构筑自己的生态，所以这样的转换本身很容易出现很多小bug。
2. 使用`MMdnn`的问题： 主要还是支持框架版本的问题（版本低），一些算子可能为实现。
3. 使用`onnx`做中间转换的问题。转换之后`inference`表现有差异。（个人经验）
4. 转换之后，只是参数转换，并没有相关图的转换，转换之后还需要再根据参数的名字，再在不同语言中定义好图之后才能运行。
